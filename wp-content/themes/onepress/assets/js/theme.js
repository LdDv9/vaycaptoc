function preload_images(e,t){if(onepress_js_settings.hero_disable_preload)t&&t();else{var n="_img_loading_"+(new Date).getTime();jQuery("body").append('<div id="'+n+'"></div>'),jQuery.each(e,function(e,t){var i=jQuery("<img>");i.attr("alt",""),i.attr("class","image__preload"),i.css("display","none"),i.attr("src",t),jQuery("#"+n).append(i)}),jQuery("#"+n).imagesLoaded(function(){t&&t(),setTimeout(function(){jQuery("#"+n).remove()},5e3)})}}function _to_number(e){if("number"==typeof e)return e;var t=e.match(/\d+$/);return t?parseFloat(t[0]):0}function _to_bool(e){return"boolean"==typeof e?e:"number"==typeof e?0!==e:"string"==typeof e&&("true"===e||"1"===e)}!function(){var e=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,t=navigator.userAgent.toLowerCase().indexOf("opera")>-1,n=navigator.userAgent.toLowerCase().indexOf("msie")>-1;(e||t||n)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",function(){var e,t=location.hash.substring(1);/^[A-z0-9_-]+$/.test(t)&&(e=document.getElementById(t))&&(/^(?:a|select|input|button|textarea)$/i.test(e.tagName)||(e.tabIndex=-1),e.focus())},!1)}(),jQuery(document).ready(function(e){var t,n,i,r=e(window),a=e(document),o={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return o.Android()||o.BlackBerry()||o.iOS()||o.Opera()||o.Windows()}},s=function(){var t=0;return e("#wpadminbar").length&&"fixed"==e("#wpadminbar").css("position")&&(t=e("#wpadminbar").height()),t},l=(n=function(n,i){void 0===i&&(i=!0),t=n.each(function(){var t=e(this);t.parent().hasClass("followWrap")||i&&t.wrap('<div class="followWrap" />'),t.parent().removeAttr("style"),t.parent().height(t.height())})},i=function(){var n;n=s();var i=r.scrollTop();t.each(function(t){var r=e(this),a=r.parent().offset().top;0===i&&r.addClass("no-scroll"),a-n<=i?(i>0&&r.removeClass("no-scroll"),r.addClass("header-fixed"),r.css("top",n)):r.removeClass("header-fixed").removeAttr("style").addClass("no-scroll")})},{load:function(t){"object"==typeof t&&t instanceof jQuery&&t.length>0&&(n(t),r.scroll(function(){i()}),r.resize(function(){n(t,!1),t.each(function(){e(this).removeClass("fixed").removeAttr("style")}),i()}),a.on("hero_ready",function(){e(".followWrap").removeAttr("style"),setTimeout(function(){e(".followWrap").removeAttr("style"),n(t,!1),i()},500)}))}});l.load(e("#masthead.is-sticky")),a.on("header_view_changed",function(){l.load(e("#masthead.is-sticky"))});var d,u=jQuery(".main-navigation .onepress-menu"),c=e(".site-header");function h(t,n){n||(n=0);var i=jQuery(window).scrollTop();e("#wpadminbar").length>0&&(i-=e("#wpadminbar").outerHeight()-1,n+=e("#wpadminbar").outerHeight()-1);var r=e("body").outerHeight(),a=t.offset().top,o=a+t.height(),s=i+r,l=!1;return i>=e("body")[0].scrollHeight-r?(a<i&&a>s||a>i&&o<i)&&(l=!0):a<=i+n&&o>i&&(l=!0),l}a.on("click","#nav-toggle",function(t){if(t.preventDefault(),jQuery("#nav-toggle").toggleClass("nav-is-visible"),u.toggleClass("onepress-menu-mobile"),jQuery(".header-widget").toggleClass("header-widget-mobile"),u.hasClass("onepress-menu-mobile")&&e(window).width()<=1140){var n=e(window).height()-c.height();u.css({height:n,overflow:"auto"})}else u.removeAttr("style")}),e(window).resize(function(){if(u.hasClass("onepress-menu-mobile")&&e(window).width()<=1140){var t=e(window).height()-c.height();u.css({height:t,overflow:"auto"})}else u.removeAttr("style")}),jQuery(".onepress-menu li.menu-item-has-children, .onepress-menu li.page_item_has_children").each(function(){jQuery(this).prepend('<div class="nav-toggle-subarrow"><i class="fa fa-angle-down"></i></div>')}),a.on("click",".nav-toggle-subarrow, .nav-toggle-subarrow .nav-toggle-subarrow",function(){jQuery(this).parent().toggleClass("nav-toggle-dropdown")}),window.current_nav_item=!1,d="1"!=onepress_js_settings.onepress_disable_sticky_header?jQuery("#wpadminbar").height()+jQuery(".site-header").height():jQuery("#wpadminbar").height(),jQuery('.home #site-navigation li a[href*="#"]').on("click",function(e){e.preventDefault(),jQuery(".onepress-menu").hasClass("onepress-menu-mobile")&&jQuery("#nav-toggle").trigger("click"),p(jQuery(this.hash))});var g=r.scrollTop();function p(e){if(e.length<=0)return!1;jQuery("html, body").animate({scrollTop:jQuery(e).offset().top-d+"px"},{duration:800,easing:"swing",complete:function(){window.current_nav_item=!1}})}(jQuery(window).scroll(function(){var e,t=null;if(window.current_nav_item)t=window.current_nav_item.replace("#","");else{var n=r.scrollTop();if(d="1"!=onepress_js_settings.onepress_disable_sticky_header?jQuery("#wpadminbar").height()+jQuery(".site-header").height():jQuery("#wpadminbar").height(),g<n)jQuery("section").each(function(e){var n=jQuery(this),i=n.attr("id")||"";h(n,d+10)&&(t=i)});else for(var i=jQuery("section").length-1;i>=0;i--){var a=jQuery("section").eq(i),o=a.attr("id")||"";h(a,d+10)&&(t=o)}g=n}(e=t)&&((e=e.replace("#",""))&&jQuery("#site-navigation li").removeClass("onepress-current-item"),e&&jQuery("#site-navigation li").find('a[href$="#'+e+'"]').parent().addClass("onepress-current-item"))}),jQuery(window).on("load",function(){var e=location.hash;jQuery(e).length>0&&p(e)}),jQuery('.hero-slideshow-wrapper a[href*="#"]:not([href="#"]), .parallax-content a[href*="#"]:not([href="#"]), .back-top-top').on("click",function(e){e.preventDefault(),p(jQuery(this.hash))}),onepress_js_settings.is_home&&jQuery(".site-branding .site-brand-inner").on("click",function(e){e.preventDefault(),jQuery("html, body").animate({scrollTop:"0px"},{duration:300,easing:"swing"})}),o.any()?jQuery("body").addClass("body-mobile").removeClass("body-desktop"):jQuery("body").addClass("body-desktop").removeClass("body-mobile"),"1"!=onepress_js_settings.onepress_disable_animation)&&new WOW({offset:50,mobile:!1,live:!1}).init();var f=function(){jQuery(".js-rotating").Morphext({animation:onepress_js_settings.hero_animation,separator:"|",speed:parseInt(onepress_js_settings.hero_speed),complete:function(){}})};if(f(),a.on("header_view_changed",function(){f()}),e(".site-content").fitVids(),e.fn.lightGallery&&e(".videolightbox-popup").lightGallery({}),e(".counter").counterUp({delay:10,time:1e3}),"1"==onepress_js_settings.onepress_vertical_align_menu){var m=jQuery(".site-header").height();jQuery(".site-header .onepress-menu").css("line-height",m+"px")}function v(t){if(e(".hero-slideshow-fullscreen").length>0){var n,i=r.height(),o=s(),l=jQuery("#masthead");n=l.hasClass("is-t")?0:l.height(),n+=o,jQuery(".hero-slideshow-fullscreen").css("height",i-n+1+"px"),void 0!==t&&t||a.trigger("hero_ready")}}r.on("resize",function(){v()}),v(),a.on("header_view_changed",function(){v()}),a.on("hero_ready",function(){v(!0)});var w=function(){e("#parallax-hero").length<=0&&jQuery(".hero-slideshow-wrapper").each(function(){var t=e(this);if(!t.hasClass("video-hero")){var n=t.data("images")||!1;"string"==typeof n&&(n=jQuery.parseJSON(n)),n?preload_images(n,function(){t.backstretch(n,{fade:_to_number(onepress_js_settings.hero_fade),duration:_to_number(onepress_js_settings.hero_duration)}),t.addClass("loaded"),t.removeClass("loading"),setTimeout(function(){t.find(".slider-spinner").remove()},600)}):(t.addClass("loaded"),t.removeClass("loading"),t.find(".slider-spinner").remove())}})};w(),a.on("header_view_changed",function(){w()}),e(".section-parallax, .parallax-hero").bind("inview",function(e,t){});function y(){e(".section-parallax ").each(function(){var t=e(this);e(".parallax-bg",t).height("");var n=t.width(),i=t.height();0==i&&(i=1),i<n&&(i*=2,e(".parallax-bg",t).height(i))})}function _(t){e.fn.justifiedGallery&&e(".gallery-justified",t).imagesLoaded(function(){e(".gallery-justified",t).each(function(){var t=e(this).attr("data-spacing")||20,n=e(this).attr("data-row-height")||120;t=_to_number(t),n=_to_number(n),e(this).justifiedGallery({rowHeight:n,margins:t,selector:"a, div:not(.spinner), .inner"})})});var n=onepress_js_settings.is_rtl;function i(){e.fn.isotope&&e(".gallery-masonry",t).each(function(){var t=e(this),n=t.attr("data-gutter")||10,i=t.attr("data-col")||5;n=_to_number(n),i=_to_number(i);var r=e(window).width();r<=940&&(i=i>2?i-1:i),r<=720&&(i=i>3?3:i),r<=576&&(i=i>2?2:i),t.find(".g-item").css({width:100/i+"%",float:"left",padding:0}),t.isotope({itemSelector:".g-item",percentPosition:!0,masonry:{columnWidth:".inner"}})})}e.fn.owlCarousel&&(e(".gallery-slider",t).owlCarousel({items:1,itemsCustom:!1,itemsDesktop:1,itemsDesktopSmall:1,itemsTablet:1,itemsTabletSmall:!1,itemsMobile:1,singleItem:!0,itemsScaleUp:!1,slideSpeed:200,paginationSpeed:800,rewindSpeed:1e3,autoPlay:4e3,stopOnHover:!0,nav:!0,navText:["<i class='lg-icon'></i>","<i class='lg-icon'></i>"],autoHeight:!0,rtl:0!=n,dots:!1}),e(".gallery-carousel",t).each(function(){var t=e(this).attr("data-col")||5;(t=_to_number(t))<=0&&(t=5),e(this).owlCarousel({items:t,responsive:{0:{items:2},768:{items:t>2?2:t},979:{items:t>3?3:t},1199:{items:t}},rtl:0!=n,navSpeed:800,autoplaySpeed:4e3,autoplayHoverPause:!0,nav:!0,navText:["<i class='lg-icon'></i>","<i class='lg-icon'></i>"],dots:!1})})),e(".gallery-masonry",t).imagesLoaded(function(){i()}),e(window).resize(function(){i()}),e.fn.lightGallery&&e(".enable-lightbox",t).lightGallery({mode:"lg-fade",selector:"a"})}e(window).scroll(function(t){var n=e(window).scrollTop();n}),e(window).resize(function(){y()}),y(),e(".parallax-hero").each(function(){var t=e(this);t.addClass("loading"),e(".parallax-bg",t).imagesLoaded({background:!0},function(){t.find(".hero-slideshow-wrapper").addClass("loaded"),t.removeClass("loading"),setTimeout(function(){t.find(".hero-slideshow-wrapper").find(".slider-spinner").remove()},600)}).fail(function(e){t.removeClass("loading"),t.find(".hero-slideshow-wrapper").addClass("loaded"),t.find(".hero-slideshow-wrapper").find(".slider-spinner").remove()})}),e(".section-parallax").each(function(){var t=e(this);e(".parallax-bg",t).imagesLoaded({background:!0},function(){}).fail(function(e){})}),setTimeout(function(){e(window).trigger("scroll")},500),_(e(".gallery-content")),"undefined"!=typeof wp&&wp.customize&&wp.customize.selectiveRefresh&&wp.customize.selectiveRefresh.bind("partial-content-rendered",function(t){"section-gallery"==t.partial.id&&(_(t.container.find(".gallery-content")),e(window).resize())})});